<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distances between null and data plots • nullabor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Distances between null and data plots">
<meta property="og:description" content="nullabor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nullabor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.14</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/nullabor.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/distances.html">Distances between null and data plots</a>
    </li>
    <li>
      <a href="../articles/nullabor-distributions.html">Assessing distributional assumptions using the nullabor package</a>
    </li>
    <li>
      <a href="../articles/nullabor-examples.html">Example lineups</a>
    </li>
    <li>
      <a href="../articles/nullabor-regression.html">Residual plots for linear models using the nullabor package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dicook/nullabor/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Distances between null and data plots</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dicook/nullabor/blob/HEAD/vignettes/distances.Rmd" class="external-link"><code>vignettes/distances.Rmd</code></a></small>
      <div class="hidden name"><code>distances.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="examining-distances-between-null-and-true-data-plots">Examining distances between null and true data plots<a class="anchor" aria-label="anchor" href="#examining-distances-between-null-and-true-data-plots"></a>
</h2>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>Numerically describing the content of data plots is very difficult.
These functions are an attempt to measure in the special situation of a
lineup, how the true data plot differs or not from the null plots.</p>
<p>Metrics are calculated in association with lineups to help understand
what people see in the data plots, and assess the quality of a lineup,
because the null plots represent a finite sample from a null
distribution, and this finiteness may affect how observers read the
lineups.</p>
<p>The distance metrics included in the nullabor package cover some of
the types of plots used in the first 10 Turk studies: scatterplots,
side-by-side boxplots, regression lines overlaid on scatterplots, and
colored scatterplots. A generic approach based on binning the plot space
and calculating data density should (roughly) work universally for 2D
displays.</p>
<p>When a null-generating method is given the functions can simulate
more draws from the null to provide an empirical distribution of the
distance values for the null plots. This would be used to guage how far
the data plot is to the null plots relative to how far null plots are
from each other. This might be used to assess whether the data plot in
lineup shuld be detected or not by a human observer.</p>
<p>The functions <code>reg_dist</code>, <code>bin_dist</code>,
<code>uni_dist</code>, <code>box_dist</code>, <code>sep_dist</code> are
ways of calculating how different one plot is from another. These are
used to get a sense if the actual data plot is different from the null
plots, in as far as we can determine numerically. The functions
<code>distmet</code> and <code>distplot</code> compute a rough estimate
of the distribution of the distance measures for the data and the null
generating mechanism, and make a plot where the values for the actual
data plot and the null plots in a lineup are shown. This helps a little
to evaluate whether we would expect people to easily pick the data plot
from the lineup and thus help to organize the setting up and analysing
the results from Amazon Turk experiments <a href="http://mamajumder.github.io/html/experiments.html" class="external-link">http://mamajumder.github.io/html/experiments.html</a>
some.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dicook/nullabor" class="external-link">nullabor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="distance-metrics">Distance metrics<a class="anchor" aria-label="anchor" href="#distance-metrics"></a>
</h3>
<p>There are five different distance metrics in
<strong>nullabor</strong> package, named <code>bin_dist</code>,
<code>box_dist</code>, <code>reg_dist</code>, <code>sep_dist</code> and
<code>uni_dist</code>. The different distance metrics are constructed so
that they can identify the different properties of the data.
<code>uni_dist</code> works for univariate data while the others works
for all types of bivariate data. Binned distance is a generic distance
which can be used in any situations while the other distance metrics are
constructed so that they can identify the effect of graphical elements
in a plot like an overlaid regression line or presence of defined
clusters. To calculate some of the metrics, additional informations like
a class variable or the number of bins should be provided.</p>
</div>
<div class="section level3">
<h3 id="distance-for-univariate-data">Distance for univariate data<a class="anchor" aria-label="anchor" href="#distance-for-univariate-data"></a>
</h3>
<p><code>uni_dist</code> is a distance metric which calculates the
euclidean distance between the first four central moments of two
univariate data. A typical usage would be when one needs to calculate
the distance between the two histograms drawn from two datasets.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/uni_dist.html">uni_dist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 2.292034</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="distance-based-on-regression-parameters">Distance based on regression parameters<a class="anchor" aria-label="anchor" href="#distance-based-on-regression-parameters"></a>
</h3>
<p><code>reg_dist</code> is a distance metric which calculates the
euclidean distance between the regression parameters of a model fitted
to one plot and that of another plot. It is advisable to use this
distance in situations where a regression line is overlaid on a
scatterplot.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/reg_dist.html">reg_dist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.9895621</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="distance-based-on-boxplots">Distance based on boxplots<a class="anchor" aria-label="anchor" href="#distance-based-on-boxplots"></a>
</h3>
<p><code>box_dist</code> is a distance metric which works for
side-by-side boxplots with two levels. The first quartile, median and
the third quartile are calculated for each box and the absolute
distances of these are calculated for the two boxes.
<code>box_dist</code> calculates the euclidean distance between these
absolute distances for the two plots. The boxplot distance should be
used in situations where a side-by-side boxplot is used to compare the
distribution of a variable at two different levels.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/box_dist.html">box_dist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span>, <span class="va">mpg</span><span class="op">)</span>,  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span><span class="op">)</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 5.828593</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="distance-based-on-separation">Distance based on separation<a class="anchor" aria-label="anchor" href="#distance-based-on-separation"></a>
</h3>
<p><code>sep_dist</code> is a distance metric based on the separation
between clusters. The separation between clusters is defined by the
minimum distances of a point in the cluster to a point in another
cluster. The separation between the clusters for a given dataset is
calculated. An euclidean distance is calculated between the separation
for the given dataset and another dataset. The number of clusters in the
dataset should be provided. If not, the hierarchical clustering method
is used to obtain the clusters.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/sep_dist.html">sep_dist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span>,  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span>, <span class="va">mpg</span>,  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, nclust <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.09188574</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="binned-distance">Binned Distance<a class="anchor" aria-label="anchor" href="#binned-distance"></a>
</h3>
<p><code>bin_dist</code> is a generic distance which works for any
situation for any dataset. For a given bivariate dataset, X and Y
variables are divided into p and q bins respectively to obtain pq cells.
The number of points falling in each cell are counted for a given
dataset. <code>bin_dist</code> between two datasets calculates the
euclidean distance between the cell counts of these two data. The values
of p and q should be provided as arguments.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="../reference/bin_dist.html">bin_dist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span>, <span class="va">mpg</span><span class="op">)</span>, lineup.dat <span class="op">=</span> <span class="cn">NULL</span>, X.bin <span class="op">=</span> <span class="fl">5</span>, Y.bin <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 8.246211</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-the-mean-distances-for-the-plots-in-the-lineup">Calculating the mean distances for the plots in the lineup<a class="anchor" aria-label="anchor" href="#calculating-the-mean-distances-for-the-plots-in-the-lineup"></a>
</h3>
<p>It is interesting to see whether the true plot in a lineup is
different from all the null plots. To find this the distances between
the true plot and all the null plots are calculated and the mean of
these distances is calculated. Similarly, for each null plot, the
distance between the null plot and all the other null plots is
calculated and averaged to obtain the mean distance for each null plot.
<code>calc_mean_dist</code> calculates the mean distance corresponding
to each plot in the lineup. If the mean distance of the true plot is
larger than the mean distances of all the null plots, the lineup is
considered easy. If one of the null plots has a larger mean distance
than the true plot, the lineup is considered difficult.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_mean_dist.html">calc_mean_dist</a></span><span class="op">(</span><span class="fu"><a href="../reference/lineup.html">lineup</a></span><span class="op">(</span><span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, <span class="va">mtcars</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'mpg'</span>, <span class="st">'wt'</span><span class="op">)</span>, met <span class="op">=</span> <span class="st">'reg_dist'</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 20 × 2</span></span></span>
<span><span class="co">##    plotno mean.dist</span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>      1    0.023<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>      2    0.039<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>      3    0.039<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>      4    0.097<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>      5    0.021<span style="text-decoration: underline;">0</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>      6    0.020<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>      7    0.042<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>      8    0.021<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>      9    0.062<span style="text-decoration: underline;">5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     10    0.876 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span>     11    0.023<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">12</span>     12    0.051<span style="text-decoration: underline;">2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">13</span>     13    0.051<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">14</span>     14    0.034<span style="text-decoration: underline;">1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">15</span>     15    0.057<span style="text-decoration: underline;">4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">16</span>     16    0.025<span style="text-decoration: underline;">8</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">17</span>     17    0.033<span style="text-decoration: underline;">3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">18</span>     18    0.053<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">19</span>     19    0.050<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">20</span>     20    0.032<span style="text-decoration: underline;">5</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="calculating-difference-measure-for-lineups">Calculating difference measure for lineups<a class="anchor" aria-label="anchor" href="#calculating-difference-measure-for-lineups"></a>
</h3>
<p>The mean distances for each plot in the lineup are obtained using
<code>calc_mean_dist</code>.<code>calc_diff</code> calculates the
difference between the mean distance for the true plot and the maximum
mean distance for the null plots.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/calc_diff.html">calc_diff</a></span><span class="op">(</span><span class="fu"><a href="../reference/lineup.html">lineup</a></span><span class="op">(</span><span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, <span class="va">mtcars</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'mpg'</span>, <span class="st">'wt'</span><span class="op">)</span>, met <span class="op">=</span> <span class="st">'reg_dist'</span>, dist.arg <span class="op">=</span> <span class="cn">NULL</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.6143594</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="optimum-number-of-bins">Optimum number of bins<a class="anchor" aria-label="anchor" href="#optimum-number-of-bins"></a>
</h3>
<p>Binned distance is highly affected by the choice of the number of
bins. The number of bins is provided by the user and this can be
subjective. This motivates to design a way to select the optimum number
of bins to be used. <code>opt_diff</code> finds the optimal number of
bins in both x and y direction which should be used to calculate the
binned distance. The binned distance is calculated for each combination
of provided choices of number of bins in x and y direction and finds the
difference using <code>calc_diff</code> for each combination. The
combination for which the difference is maximum should be used.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt.diff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/opt_bin_diff.html">opt_bin_diff</a></span><span class="op">(</span><span class="fu"><a href="../reference/lineup.html">lineup</a></span><span class="op">(</span><span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, <span class="va">mtcars</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'mpg'</span>, <span class="st">'wt'</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">4</span>, pos <span class="op">=</span> <span class="fl">10</span>, plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">opt.diff</span><span class="op">$</span><span class="va">p</span></span></code></pre></div>
<p><img src="distances_files/figure-html/unnamed-chunk-9-1.png" width="336" style="display:block; margin: auto"></p>
</div>
<div class="section level3">
<h3 id="distribution-of-distance-metrics">Distribution of distance metrics<a class="anchor" aria-label="anchor" href="#distribution-of-distance-metrics"></a>
</h3>
<p>Measuring the quality of a lineup is interesting. But it may also be
important to compare a few lineups. The <code>distmet</code> function
provides the empirical distribution of the distance metrics based on the
mean distance of the true plot and the mean distance from the null
plots. The lineup data, the null generating mechanism and the choice of
the distance metric has to be provided. Users have the flexibility of
using their distance metrics. The position of the true plot in the
lineup has to be provided as well. If the distance metrics require
additional arguments, those have to be provided as well.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lineup.dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lineup.html">lineup</a></span><span class="op">(</span><span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, <span class="va">mtcars</span>, pos <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/qplot.html" class="external-link">qplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">wt</span>, data <span class="op">=</span> <span class="va">lineup.dat</span>, geom <span class="op">=</span> <span class="st">'point'</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.sample</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: `qplot()` was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">## <span style="color: #555555;">generated.</span></span></span></code></pre>
<p><img src="distances_files/figure-html/unnamed-chunk-10-1.png" width="1056" style="display:block; margin: auto"></p>
<p>Copy and paste the output of lineup.dat to get the position of the
true plot</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#decrypt('...') </span></span>
<span><span class="co">#[1] 'True data in position 10' # Use pos = 10</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist.vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distmet.html">distmet</a></span><span class="op">(</span><span class="va">lineup.dat</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'mpg'</span>, <span class="st">'wt'</span><span class="op">)</span>,<span class="st">'reg_dist'</span>, <span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, pos <span class="op">=</span> <span class="fl">10</span>, repl <span class="op">=</span> <span class="fl">100</span>, dist.arg <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> </span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dist.vals</span><span class="op">$</span><span class="va">lineup</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">##   plotno mean.dist</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      1    0.031<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>      2    0.037<span style="text-decoration: underline;">6</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>      3    0.038<span style="text-decoration: underline;">7</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>      4    0.097<span style="text-decoration: underline;">9</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>      5    0.209 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>      6    0.156</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist.vals</span><span class="op">$</span><span class="va">diff</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.5947055</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dist.vals</span><span class="op">$</span><span class="va">closest</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]  5  6  4 18 13</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dist.vals</span><span class="op">$</span><span class="va">null_values</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.12527373 0.07760364 0.04518376 0.04094711 0.06989432 0.09567388</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist.vals</span><span class="op">$</span><span class="va">pos</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 10</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist.vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/distmet.html">distmet</a></span><span class="op">(</span><span class="va">lineup.dat</span>, var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'mpg'</span>, <span class="st">'wt'</span><span class="op">)</span>,<span class="st">'bin_dist'</span>, <span class="fu"><a href="../reference/null_permute.html">null_permute</a></span><span class="op">(</span><span class="st">'mpg'</span><span class="op">)</span>, pos <span class="op">=</span> <span class="fl">10</span>, repl <span class="op">=</span> <span class="fl">100</span>, dist.arg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineup.dat <span class="op">=</span> <span class="va">lineup.dat</span>, X.bin <span class="op">=</span> <span class="fl">5</span>, Y.bin <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting-the-empirical-distribution-of-the-distance-metric">Plotting the empirical distribution of the distance metric<a class="anchor" aria-label="anchor" href="#plotting-the-empirical-distribution-of-the-distance-metric"></a>
</h3>
<p><code>distplot</code> functions plots the empirical distribution of
the distance metric, given the output of <code>distmet</code> function.
The distribution is shown in grey along the distance for the true plot
in orange and the distances for the null plots in black.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/distplot.html">distplot</a></span><span class="op">(</span><span class="va">dist.vals</span><span class="op">)</span></span></code></pre></div>
<p><img src="distances_files/figure-html/unnamed-chunk-15-1.png" width="528" style="display:block; margin: auto"></p>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>Roy Chowdhury, N. and Cook, D. and Hofmann, H. and Majumder, M.
(2018) Measuring Lineup Difficulty By Matching Distance Metrics With
Subject Choices in Crowd-Sourced Data, Journal of Computational and
Graphical Statistics, 27(1), 132–145, DOI:
10.1080/10618600.2017.1356323.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Hadley Wickham, Niladri Roy Chowdhury, Di Cook, Heike Hofmann, Måns Thulin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
